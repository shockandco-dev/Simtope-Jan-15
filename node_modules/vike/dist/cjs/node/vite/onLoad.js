"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.onLoad = onLoad;
const assertIsNotBrowser_js_1 = require("../../utils/assertIsNotBrowser.js");
const assertSetup_js_1 = require("../../utils/assertSetup.js");
const assertNodeVersion_js_1 = require("../../utils/assertNodeVersion.js");
const assertVersion_js_1 = require("../../utils/assertVersion.js");
const vite_1 = require("vite");
function onLoad() {
    (0, assertSetup_js_1.markSetup_vikeVitePlugin)();
    (0, assertIsNotBrowser_js_1.assertIsNotBrowser)();
    (0, assertNodeVersion_js_1.assertNodeVersion)();
    // package.json#peerDependencies isn't enough as users often ignore it
    // This assertion isn't reliable: the user may still use a Vite version older than 6.0.0 â€” see https://github.com/vitejs/vite/pull/19355
    // TO-DO/eventually: let's also use this.meta.viteVersion
    // - https://github.com/vitejs/vite/pull/20088
    // - https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md#700-2025-06-24
    (0, assertVersion_js_1.assertVersion)('Vite', vite_1.version, '6.0.0');
    // Ensure we don't bloat the server runtime with heavy dependencies such Vite and esbuild
    (0, assertSetup_js_1.assertIsNotProductionRuntime)();
}
