"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isVikeCliOrApi = isVikeCliOrApi;
exports.setContextVikeApiOperation = setContextVikeApiOperation;
exports.clearContextVikeApiOperation = clearContextVikeApiOperation;
exports.getVikeApiOperation = getVikeApiOperation;
// We don't import from ./utils.js because we tolerate this file to be loaded in production
const utils_js_1 = require("../runtime/utils.js");
const globalObject = (0, utils_js_1.getGlobalObject)('api/context.ts', {});
function getVikeApiOperation() {
    return globalObject.vikeApiOperation ?? null;
}
function isVikeCliOrApi() {
    // The CLI uses the API
    return !!globalObject.vikeApiOperation;
}
function setContextVikeApiOperation(operation, options) {
    (0, utils_js_1.assert)(!globalObject.vikeApiOperation);
    globalObject.vikeApiOperation = { operation, options };
}
function clearContextVikeApiOperation() {
    globalObject.vikeApiOperation = undefined;
}
